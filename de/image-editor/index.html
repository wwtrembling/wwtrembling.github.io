<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-adsense-account" content="ca-pub-6334819180242631">
  <title>Bildeditor (Zuschneiden/Drehen/Filter) - Tool Shelf</title>
  <meta name="description" content="Bilder online einfach zuschneiden, drehen, spiegeln und filtern. Kostenloser Fotoeditor.">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Bildeditor (Zuschneiden/Drehen/Filter) - Tool Shelf">
  <meta property="og:description" content="Bilder online einfach zuschneiden, drehen, spiegeln und filtern. Kostenloser Fotoeditor.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://utilifyapp.net/de/image-editor/">
  
  <!-- Canonical -->
  <link rel="canonical" href="https://utilifyapp.net/de/image-editor/">
  
  <!-- Language Alternatives -->
  <link rel="alternate" hreflang="ko" href="https://utilifyapp.net/ko/image-editor/">
  <link rel="alternate" hreflang="en" href="https://utilifyapp.net/en/image-editor/">
  <link rel="alternate" hreflang="ja" href="https://utilifyapp.net/ja/image-editor/">
  <link rel="alternate" hreflang="hi" href="https://utilifyapp.net/hi/image-editor/">
  <link rel="alternate" hreflang="id" href="https://utilifyapp.net/id/image-editor/">
  <link rel="alternate" hreflang="vi" href="https://utilifyapp.net/vi/image-editor/">
  <link rel="alternate" hreflang="th" href="https://utilifyapp.net/th/image-editor/">
  <link rel="alternate" hreflang="de" href="https://utilifyapp.net/de/image-editor/">
  <link rel="alternate" hreflang="pt" href="https://utilifyapp.net/pt/image-editor/">
  <link rel="alternate" hreflang="x-default" href="https://utilifyapp.net/en/image-editor/">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Cropper.js CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
  
  <!-- Styles -->
  <link rel="stylesheet" href="/assets/css/main.css">
  
  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Bildeditor (Zuschneiden/Drehen/Filter)",
    "description": "Bilder online einfach zuschneiden, drehen, spiegeln und filtern. Kostenloser Fotoeditor.",
    "url": "https://utilifyapp.net/de/image-editor/",
    "inLanguage": "de",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
  
  <style>
    .editor-wrapper {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: var(--spacing-lg);
      margin-top: var(--spacing-lg);
      align-items: start;
    }
    
    .sidebar {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: var(--spacing-lg);
      position: sticky;
      top: 20px;
    }
    
    .canvas-container {
      background: #333; /* Dark background for canvas */
      border-radius: var(--radius-lg);
      padding: var(--spacing-md);
      min-height: 400px;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
    }
    
    img#image {
      max-width: 100%;
      max-height: 600px;
      display: block;
    }
    
    .upload-box {
      border: 2px dashed var(--border-color);
      padding: var(--spacing-xl);
      text-align: center;
      cursor: pointer;
      border-radius: var(--radius-lg);
      background: var(--bg-secondary);
      transition: all 0.2s;
      width: 100%;
      height: 400px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    
    .upload-box:hover {
      border-color: var(--primary-color);
      background: var(--bg-primary);
    }
    
    .tool-section {
      margin-bottom: var(--spacing-lg);
      padding-bottom: var(--spacing-lg);
      border-bottom: 1px solid var(--border-color);
    }
    
    .tool-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .tool-title {
      font-weight: 600;
      margin-bottom: var(--spacing-md);
      display: block;
      color: var(--text-primary);
    }
    
    .btn-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-sm);
    }
    
    .btn-tool {
      padding: 8px;
      font-size: 0.9rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.1s;
    }
    
    .btn-tool:hover {
      background: var(--bg-primary);
      border-color: var(--primary-color);
    }

    .btn-tool.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    .slider-container {
      margin-bottom: var(--spacing-md);
    }
    
    .slider-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }
    
    .download-btn {
      width: 100%;
      margin-top: var(--spacing-md);
    }
    
    @media (max-width: 900px) {
      .editor-wrapper {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        order: 2;
        position: static;
      }
      
      .canvas-container {
        order: 1;
      }
    }
  </style>
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6334819180242631"
     crossorigin="anonymous"></script>

</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="header-content">
        <a href="/de/" class="site-logo">
          üõ†Ô∏è Tool Shelf
        </a>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="container-narrow" style="max-width: 1200px;">
      <h1>üé® Bildeditor (Zuschneiden/Drehen/Filter)</h1>
      <p>Bilder online einfach zuschneiden, drehen, spiegeln und filtern. Kostenloser Fotoeditor.</p>
      
      <!-- AdSense Placeholder -->
      <div class="adsense-placeholder">
        <!-- AdSense Ad Unit -->
        <p>Werbefl√§che</p>
      </div>

      <div id="uploadScreen">
        <div class="upload-box" onclick="document.getElementById('fileInput').click()">
          <span style="font-size: 3rem;">üìÅ</span>
          <h3>Bild hochladen</h3>
          <p>Klicken oder Ziehen zum Hochladen</p>
          <input type="file" id="fileInput" accept="image/*" hidden>
        </div>
      </div>
      
      <div id="editorScreen" class="editor-wrapper" style="display: none;">
        <!-- Sidebar Controls -->
        <aside class="sidebar">
          
          <!-- Crop / Rotate Tools -->
          <div class="tool-section">
            <span class="tool-title">Zuschneiden & Drehen</span>
            <div class="btn-grid">
              <button class="btn-tool" onclick="rotate(-90)" title="Links drehen">‚Ü∫ 90¬∞</button>
              <button class="btn-tool" onclick="rotate(90)" title="Rechts drehen">‚Üª 90¬∞</button>
              <button class="btn-tool" onclick="flipX()" title="Horizontal spiegeln">‚áÑ Flip</button>
              <button class="btn-tool" onclick="flipY()" title="Vertikal spiegeln">‚áÖ Flip</button>
            </div>
            
            <div style="margin-top: var(--spacing-md);">
              <span class="tool-title" style="font-size: 0.9rem;">Verh√§ltnis:</span>
              <div class="btn-grid" style="grid-template-columns: 1fr 1fr 1fr;">
                <button class="btn-tool active" onclick="setAspectRatio(NaN)">Frei</button>
                <button class="btn-tool" onclick="setAspectRatio(1.777)">16:9</button>
                <button class="btn-tool" onclick="setAspectRatio(1.333)">4:3</button>
                <button class="btn-tool" onclick="setAspectRatio(1)">1:1</button>
              </div>
            </div>
          </div>
          
          <!-- Filter Tools -->
          <div class="tool-section">
            <span class="tool-title">Filter</span>
            
            <!-- Brightness -->
            <div class="slider-container">
              <div class="slider-header">
                <span>Helligkeit</span>
                <span id="valBrightness">0</span>
              </div>
              <input type="range" id="rngBrightness" class="range-slider" min="-100" max="100" value="0" oninput="updateFilters()">
            </div>
            
            <!-- Contrast -->
            <div class="slider-container">
              <div class="slider-header">
                <span>Kontrast</span>
                <span id="valContrast">0</span>
              </div>
              <input type="range" id="rngContrast" class="range-slider" min="-100" max="100" value="0" oninput="updateFilters()">
            </div>
            
            <!-- Saturation -->
            <div class="slider-container">
              <div class="slider-header">
                <span>S√§ttigung</span>
                <span id="valSaturation">0</span>
              </div>
              <input type="range" id="rngSaturation" class="range-slider" min="-100" max="100" value="0" oninput="updateFilters()">
            </div>
            
            <button class="btn-tool" style="width: 100%;" onclick="resetFilters()">Zur√ºcksetzen</button>
          </div>
          
          <button class="btn btn-primary download-btn" onclick="downloadImage()">Bild herunterladen</button>
          <button class="btn btn-secondary" style="width: 100%; margin-top: 8px;" onclick="location.reload()">New Image</button>
        </aside>
        
        <!-- Canvas Area -->
        <div class="canvas-container">
          <img id="image" src="">
        </div>
      </div>
      
      <!-- AdSense Placeholder -->
      <div class="adsense-placeholder">
        <!-- AdSense Ad Unit -->
        <p>Werbefl√§che</p>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <p>&copy; 2025 Tool Shelf. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="/assets/js/common.js"></script>
  <!-- Cropper.js JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
  
  <script>
    // Variables
    const fileInput = document.getElementById('fileInput');
    const uploadScreen = document.getElementById('uploadScreen');
    const editorScreen = document.getElementById('editorScreen');
    const imageElement = document.getElementById('image');
    
    // Sliders
    const rngBrightness = document.getElementById('rngBrightness');
    const rngContrast = document.getElementById('rngContrast');
    const rngSaturation = document.getElementById('rngSaturation');
    const valBrightness = document.getElementById('valBrightness');
    const valContrast = document.getElementById('valContrast');
    const valSaturation = document.getElementById('valSaturation');
    
    let cropper = null;
    let scaleX = 1;
    let scaleY = 1;
    
    // 1. Upload
    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (evt) => {
          imageElement.src = evt.target.result;
          uploadScreen.style.display = 'none';
          editorScreen.style.display = 'grid';
          initCropper();
        };
        reader.readAsDataURL(file);
      }
    });
    
    // 2. Initialize Cropper
    function initCropper() {
      if (cropper) {
        cropper.destroy();
      }
      
      cropper = new Cropper(imageElement, {
        viewMode: 1, // Restrict crop box to canvas
        dragMode: 'move',
        autoCropArea: 0.8,
        restore: false,
        guides: true,
        center: true,
        highlight: false,
        cropBoxMovable: true,
        cropBoxResizable: true,
        toggleDragModeOnDblclick: false,
      });
    }
    
    // 3. Crop/Rotate Tools
    function rotate(deg) {
      if(cropper) cropper.rotate(deg);
    }
    
    function flipX() {
      if(cropper) {
        scaleX = -scaleX;
        cropper.scaleX(scaleX);
      }
    }
    
    function flipY() {
      if(cropper) {
        scaleY = -scaleY;
        cropper.scaleY(scaleY);
      }
    }
    
    function setAspectRatio(ratio) {
      if(cropper) cropper.setAspectRatio(ratio);
      
      // Update UI active state
      const buttons = document.querySelectorAll('.tool-section button');
      buttons.forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
    }
    
    // 4. Filters (Visual Preview on Canvas DOM)
    // Cropper wraps the image. We can apply CSS filters to the cropper-container or the image wrapper for preview.
    // However, for correct preview during cropping, it's best to apply to the .cropper-canvas container?
    // Actually, simple CSS filter on the 'cropper-view-box img' gives a good preview.
    
    function updateFilters() {
      const b = rngBrightness.value;
      const c = rngContrast.value;
      const s = rngSaturation.value;
      
      valBrightness.textContent = b;
      valContrast.textContent = c;
      valSaturation.textContent = s;
      
      // Calculate CSS filter string
      // Brightness: 100% is default. Range -100 to 100 => 0% to 200%
      // Contrast: 100% is default. 0% to 200%
      // Saturation: 100% default. 0% to 200%
      
      const cssB = (100 + parseInt(b)) + '%';
      const cssC = (100 + parseInt(c)) + '%';
      const cssS = (100 + parseInt(s)) + '%';
      
      const filterString = `brightness(${cssB}) contrast(${cssC}) saturate(${cssS})`;
      
      // Apply to the relevant Cropper elements for preview
      const uploadedImg = document.querySelector('.cropper-hide'); // Original
      const viewBoxImg = document.querySelector('.cropper-view-box img'); // The one inside crop box
      const canvasImg = document.querySelector('.cropper-canvas img'); // The dim one outside
      
      if (viewBoxImg) viewBoxImg.style.filter = filterString;
      if (canvasImg) canvasImg.style.filter = filterString;
    }
    
    function resetFilters() {
      rngBrightness.value = 0;
      rngContrast.value = 0;
      rngSaturation.value = 0;
      updateFilters();
    }
    
    // 5. Download
    function downloadImage() {
      if (!cropper) return;
      
      // 1. Get Cropped Canvas (this applies crop, rotate, flip)
      const canvas = cropper.getCroppedCanvas({
        maxWidth: 4096,
        maxHeight: 4096,
        imageSmoothingQuality: 'high'
      });
      
      if (!canvas) return;
      
      // 2. Apply Filters using Context (Pixel Manipulation) to the result canvas
      // Because CSS filters on the DOM don't export to the canvas automatically.
      
      const ctx = canvas.getContext('2d');
      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      
      const b = parseInt(rngBrightness.value);     // -100 to 100
      const c = parseInt(rngContrast.value);       // -100 to 100
      const s = parseInt(rngSaturation.value);     // -100 to 100
      
      // Optimization: If all are 0, skip loop
      if (b !== 0 || c !== 0 || s !== 0) {
         // Convert ranges to factors
         // Contrast: formula is usually factor = (259 * (contrast + 255)) / (255 * (259 - contrast))
         // let's use a simplified logical approach or standard formula
         
         const contrastFactor = (259 * (c + 255)) / (255 * (259 - c));
         // Saturation: more complex. 
         const satFactor = (100 + s) / 100;
         
         for (let i = 0; i < data.length; i += 4) {
            let r = data[i];
            let g = data[i+1];
            let bl = data[i+2];
            
            // 1. Brightness (Simple additive)
            r += b * 2.55; // mapping 100 to 255 roughly
            g += b * 2.55;
            bl += b * 2.55;
            
            // 2. Contrast
            r = contrastFactor * (r - 128) + 128;
            g = contrastFactor * (g - 128) + 128;
            bl = contrastFactor * (bl - 128) + 128;
            
            // 3. Saturation (Gray scale interpolation)
            const gray = 0.2989 * r + 0.5870 * g + 0.1140 * bl;
            r = gray + satFactor * (r - gray);
            g = gray + satFactor * (g - gray);
            bl = gray + satFactor * (bl - gray);
            
            // Clamp
            data[i] = Math.max(0, Math.min(255, r));
            data[i+1] = Math.max(0, Math.min(255, g));
            data[i+2] = Math.max(0, Math.min(255, bl));
         }
         
         ctx.putImageData(imageData, 0, 0);
      }
      
      // 3. Export to Blob/DataURL
      const link = document.createElement('a');
      link.download = 'edited-image.png';
      link.href = canvas.toDataURL('image/png', 1.0);
      link.click();
    }
  </script>
</body>
</html>
